(this["webpackJsonpstream-graph-overlay"]=this["webpackJsonpstream-graph-overlay"]||[]).push([[0],{86:function(e,t,a){},87:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(31),l=a.n(r),o=(a(86),a(15)),i=a(10),s=(a(87),a(45)),j=a(66),d=a(154),h=a(159),u=a(158),b=a(157),O=a(150),x=a(152),m=a(155),p=a(153),f=a(156),v=a(149),g=a(148),C=a(1);function k(){var e=new j.a,t=[],a=Object(c.useState)(t),n=Object(i.a)(a,2),r=n[0],l=n[1],k=Object(c.useState)(""),y=Object(i.a)(k,2),N=y[0],S=y[1],w=Object(c.useState)("#00ff00"),T=Object(i.a)(w,2),_=T[0],B=T[1],I=Object(c.useState)(!1),L=Object(i.a)(I,2),P=L[0],W=L[1],A=Object(c.useState)("#ff0000"),z=Object(i.a)(A,2),D=z[0],F=z[1],H=Object(c.useState)(!1),E=Object(i.a)(H,2),R=E[0],J=E[1],M=Object(c.useState)("#000000"),U=Object(i.a)(M,2),Y=U[0],V=U[1],q=Object(c.useState)(!1),G=Object(i.a)(q,2),K=G[0],Q=G[1],X=Object(c.useState)("#ffffff"),Z=Object(i.a)(X,2),$=Z[0],ee=Z[1],te=Object(c.useState)(!1),ae=Object(i.a)(te,2),ce=ae[0],ne=ae[1],re=Object(c.useState)(!1),le=Object(i.a)(re,2),oe=le[0],ie=le[1],se=Object(c.useState)(!1),je=Object(i.a)(se,2),de=je[0],he=je[1],ue=Object(c.useState)(!1),be=Object(i.a)(ue,2),Oe=be[0],xe=be[1],me=Object(c.useState)(90),pe=Object(i.a)(me,2),fe=pe[0],ve=pe[1],ge=Object(c.useState)(!1),Ce=Object(i.a)(ge,2),ke=Ce[0],ye=Ce[1],Ne=Object(c.useState)(!1),Se=Object(i.a)(Ne,2),we=Se[0],Te=Se[1],_e=Object(c.useState)(!1),Be=Object(i.a)(_e,2),Ie=Be[0],Le=Be[1],Pe=Object(c.useState)(!1),We=Object(i.a)(Pe,2),Ae=We[0],ze=We[1];Object(c.useEffect)((function(){var t=e.get("stream-poll-save-data");if(t){var a=t.options;l(t.items),S(a.graphTitle),he(a.showBorder),ie(a.showOutline),ve(a.chartWidth),F(a.barColour),V(a.textColour),ee(a.textOutlineColour),B(a.chromaColour),Te(a.allowSaving)}}),[]);var De=function(e,t){r[e]?l([].concat(Object(o.a)(r.slice(0,e)),[Object.assign({},r[e],t)],Object(o.a)(r.slice(e+1)))):l([].concat(Object(o.a)(r),[Object.assign({},r[e],t)]))},Fe=function(){var e=0;return r.forEach((function(t){t&&(e+=t.count||0)})),e},He=function(){return"\n      -1px -1px 0 ".concat($,",\n      0 -1px 0 ").concat($,",\n      1px -1px 0 ").concat($,",\n      1px 0 0 ").concat($,",\n      1px 1px 0 ").concat($,",\n      0 1px 0 ").concat($,",\n      -1px 1px 0 ").concat($,",\n      -1px 0 0 ").concat($,"\n    ")},Ee=function(e){var t=e.target.value,a=e.target.id.match(/[\d]+/g);if(a){var c=parseInt(a[0]);De(c,{name:t,count:r[c].count}),Ve()}},Re=function(e){var t=e.target.value,a=parseInt(t),c=e.target.id.match(/[\d]+/g);if(c){var n=parseInt(c[0]);De(n,{name:r[n].name,count:Number.isNaN(a)?0:a}),Ve()}},Je=function(e){var t=r[e].count;De(e,{name:r[e].name,count:t+1}),Ve()},Me=function(e){if(r[e]&&void 0!==r[e].count){var t=r[e].count-1;t<0&&(t=0),De(e,{name:r[e].name,count:t}),Ve()}},Ue=function(e){return"".concat(e,"%")},Ye=function(e){var t=e.currentTarget.id.match(/[\d]+/g);if(t){var a=Array.from(r),c=parseInt(t[0]);a[c]&&(a.splice(c,1),l(a))}Ve()},Ve=function(t){if(we||t){var a={options:{graphTitle:N,showBorder:de,showOutline:oe,chartWidth:fe,barColour:D,textColour:Y,textOutlineColour:$,chromaColour:_,allowSaving:we},items:r};e.set("stream-poll-save-data",a,{path:"/"}),t&&Le(!0)}};return Object(C.jsxs)("div",{className:"chart",children:[Object(C.jsx)(p.a,{open:Ie,autoHideDuration:3e3,onClose:function(){return Le(!1)},children:Object(C.jsx)(x.a,{elevation:6,severity:"success",variant:"filled",children:"Local chart data saved"})}),Object(C.jsx)(p.a,{open:Ae,autoHideDuration:3e3,onClose:function(){return ze(!1)},children:Object(C.jsx)(x.a,{elevation:6,severity:"success",variant:"filled",children:"Local chart data deleted"})}),Object(C.jsx)(O.a,{open:ke,"aria-labelledby":"modal-info","aria-describedby":"modal-modal-description",onClose:function(){return ye(!ke)},children:Object(C.jsxs)("div",{className:"modal-box",children:[Object(C.jsx)("h3",{style:{marginTop:8},children:"How to add as a stream overlay"}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:"Add a Window Capture of this browser window"}),Object(C.jsx)("li",{children:"Crop the capture down to the chart area"}),Object(C.jsx)("li",{children:"Use a chroma/colour key to make the chart background transparent"})]}),Object(C.jsx)("h3",{style:{marginTop:8},children:"How to use the chart builder"}),Object(C.jsxs)("ul",{children:[Object(C.jsxs)("li",{children:["Click ",Object(C.jsx)(u.a,{fontSize:"small",children:"add_circle"})," to add a new item to the chart"]}),Object(C.jsx)("li",{children:"Bars will only show on the chart if they have a name and a count"}),Object(C.jsx)("li",{children:"Bars will update in realtime when names and counts are changed"}),Object(C.jsxs)("li",{children:["To remove an item from the chart, you can either blank out the item's name or click the ",Object(C.jsx)(u.a,{fontSize:"small",children:"delete_forever"})," next to the item"]}),Object(C.jsxs)("li",{children:["To clear the chart, click ",Object(C.jsx)(u.a,{fontSize:"small",children:"layers_clear"})," at the top of the items list"]})]}),Object(C.jsx)("h3",{style:{marginTop:8},children:"Using auto-save"}),Object(C.jsxs)("ul",{children:[Object(C.jsx)("li",{children:"When auto-saving is enabled, updates to the chart (both values and configuration) will be periodically stored in a local cookie file."}),Object(C.jsxs)("li",{children:["You can trigger a manual save by clicking ",Object(C.jsx)(u.a,{fontSize:"small",children:"save"})," on the right-hand side of the chart items area.",Object(C.jsx)("ul",{children:Object(C.jsx)("li",{children:"It is recommended you trigger a save this way before you leave the page to prevent data loss."})})]}),Object(C.jsx)("li",{children:"When you come back to this page, if the cookie with your data is still present, the chart will automatically load that data in."}),Object(C.jsxs)("li",{children:["You can delete the local data at any time by clicking ",Object(C.jsx)(u.a,{fontSize:"small",color:"error",children:"cookie"})," on the right-hand side of the chart items area."]})]})]})}),Object(C.jsxs)("div",{className:"main-chart",style:{backgroundColor:_,color:Y,width:fe+"%"},children:[Object(C.jsxs)("div",{className:"graph-title-area",style:oe?{textShadow:He()}:{},children:[Object(C.jsx)("div",{className:"graph-title",children:N}),Oe&&Object(C.jsxs)("div",{className:"graph-subtitle",children:[Fe()," total votes"]})]}),Object(C.jsx)("div",{className:"graph-area",style:{borderLeftColor:Y,borderLeftWidth:de?"2px":"0px",borderBottomColor:Y,borderBottomWidth:de?"2px":"0px"},children:function(){var e=Fe();return r.map((function(t,a){if(t.name&&t.count>=0){var c=(t.count||0)/e*100+"%";return Object(C.jsxs)("div",{className:"graph-item",children:[Object(C.jsxs)("div",{className:"graph-info",style:oe?{textShadow:He()}:{},children:[t.name," ",Object(C.jsxs)("span",{className:"graph-count",children:["(",t.count,")"]})]}),Object(C.jsx)("div",{className:"graph-bar",style:{maxWidth:c,backgroundColor:D},children:"\u2003"})]},"graph-bar-".concat(a))}return""}))}()})]}),Object(C.jsxs)("div",{className:"chart-options",children:[Object(C.jsxs)("div",{className:"title-form",children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)(v.a,{id:"graph-title",label:"Chart Title",variant:"outlined",value:N,onChange:function(e){return function(e){var t=e.target.value;S(t),Ve()}(e)}}),Object(C.jsx)(g.a,{title:"How to use",children:Object(C.jsx)(b.a,{color:"primary",onClick:function(){return ye(!ke)},children:Object(C.jsx)(u.a,{children:"info"})})})]}),Object(C.jsx)("div",{className:"form-group",children:Object(C.jsxs)(h.a,{children:[Object(C.jsx)(d.a,{control:Object(C.jsx)(f.a,{checked:de,onChange:function(){return he(!de)},inputProps:{"aria-label":"controlled"}}),label:"Chart axis lines"}),Object(C.jsx)(d.a,{control:Object(C.jsx)(f.a,{checked:oe,onChange:function(){return ie(!oe)},inputProps:{"aria-label":"controlled"}}),label:"Outline on text"}),Object(C.jsx)(d.a,{control:Object(C.jsx)(f.a,{checked:Oe,onChange:function(){return xe(!Oe)},inputProps:{"aria-label":"controlled"}}),label:"Total votes"}),Object(C.jsx)(d.a,{className:"slider-label",control:Object(C.jsx)(m.a,{value:fe,"aria-label":"Chart width",valueLabelFormat:Ue,getAriaValueText:Ue,valueLabelDisplay:"auto",onChange:function(e,t){"number"===typeof t&&(ve(t),Ve())}}),label:"Chart width",labelPlacement:"top"})]})}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)(v.a,{id:"graph-colour",label:"Bar colour",variant:"outlined",value:D,onChange:function(e){F(e.target.value),Ve()}}),Object(C.jsx)(g.a,{title:"Toggle bar colour picker",children:Object(C.jsx)(b.a,{color:"primary",onClick:function(){return J(!R)},children:Object(C.jsx)(u.a,{children:R?"cancel":"palette"})})}),R&&Object(C.jsx)("div",{className:"colour-picker",children:Object(C.jsx)(s.a,{className:"picker",color:D,onChange:function(e){F(e),Ve()}})})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)(v.a,{id:"graph-text",label:"Text/axis colour",variant:"outlined",value:Y,onChange:function(e){V(e.target.value),Ve()}}),Object(C.jsx)(g.a,{title:"Toggle text colour picker",children:Object(C.jsx)(b.a,{color:"primary",onClick:function(){return Q(!K)},children:Object(C.jsx)(u.a,{children:K?"cancel":"palette"})})}),K&&Object(C.jsx)("div",{className:"colour-picker",children:Object(C.jsx)(s.a,{className:"picker",color:Y,onChange:function(e){V(e),Ve()}})})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)(v.a,{id:"graph-text",label:"Text outline colour",variant:"outlined",value:$,onChange:function(e){ee(e.target.value),Ve()}}),Object(C.jsx)(g.a,{title:"Toggle text outline colour picker",children:Object(C.jsx)(b.a,{color:"primary",onClick:function(){return ne(!ce)},children:Object(C.jsx)(u.a,{children:ce?"cancel":"palette"})})}),ce&&Object(C.jsx)("div",{className:"colour-picker",children:Object(C.jsx)(s.a,{className:"picker",color:$,onChange:function(e){ee(e),Ve()}})})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)(v.a,{id:"graph-text",label:"Chroma key colour",variant:"outlined",value:_,onChange:function(e){B(e.target.value),Ve()}}),Object(C.jsx)(g.a,{title:"Toggle chroma key colour picker",children:Object(C.jsx)(b.a,{color:"primary",onClick:function(){return W(!P)},children:Object(C.jsx)(u.a,{children:P?"cancel":"palette"})})}),P&&Object(C.jsx)("div",{className:"colour-picker",children:Object(C.jsx)(s.a,{className:"picker",color:_,onChange:function(e){B(e),Ve()}})})]}),Object(C.jsx)("div",{className:"form-group",children:Object(C.jsx)(h.a,{children:Object(C.jsx)(d.a,{control:Object(C.jsx)(f.a,{checked:we,onChange:function(){return Te(!we)},inputProps:{"aria-label":"controlled"}}),label:"Enable auto-save"})})})]}),Object(C.jsxs)("div",{className:"items-form",children:[Object(C.jsxs)("h2",{className:"flex-header",children:[Object(C.jsx)("span",{children:"Chart Items"}),Object(C.jsx)(g.a,{title:"Add item",children:Object(C.jsx)(b.a,{onClick:function(){var e=r.length;De(e,{name:"",count:0}),Ve()},children:Object(C.jsx)(u.a,{children:"add_circle"})})}),Object(C.jsx)(g.a,{title:"Remove all items",children:Object(C.jsx)(b.a,{onClick:function(){l(t),Ve()},children:Object(C.jsx)(u.a,{children:"layers_clear"})})}),Object(C.jsx)("span",{className:"flex-spacer"}),Object(C.jsx)(g.a,{title:"Save chart data",children:Object(C.jsx)(b.a,{onClick:function(){return Ve(!0)},children:Object(C.jsx)(u.a,{children:"save"})})}),Object(C.jsx)(g.a,{title:"Delete saved data",children:Object(C.jsx)(b.a,{onClick:function(){e.remove("stream-poll-save-data"),ze(!0)},children:Object(C.jsx)(u.a,{color:"error",children:"cookie"})})})]}),r.map((function(e,t){return Object(C.jsxs)("div",{className:"form-item",children:[Object(C.jsx)("span",{className:"graph-form-number",children:t+1}),Object(C.jsx)(v.a,{id:"graph-item-".concat(t,"-name"),label:"Name",onChange:Ee,variant:"outlined",value:r[t].name}),Object(C.jsx)(v.a,{id:"graph-item-".concat(t,"-count"),inputProps:{inputMode:"numeric",pattern:"[0-9]*"},label:"Count",onChange:Re,variant:"outlined",value:r[t].count}),Object(C.jsx)(g.a,{title:"Add one to count",children:Object(C.jsx)(b.a,{"aria-label":"Add one to count",id:"graph-item-".concat(t,"-add"),onClick:function(){return Je(t)},children:Object(C.jsx)(u.a,{children:"exposure_plus_1"})})}),Object(C.jsx)(g.a,{title:"Subtract one from count",children:Object(C.jsx)(b.a,{"aria-label":"Subtract one from count",id:"graph-item-".concat(t,"-sub"),onClick:function(){return Me(t)},children:Object(C.jsx)(u.a,{children:"exposure_neg_1"})})}),Object(C.jsx)(g.a,{title:"Remove item",children:Object(C.jsx)(b.a,{"aria-label":"Remove item",id:"graph-item-".concat(t,"-remove"),onClick:Ye,children:Object(C.jsx)(u.a,{children:"delete_forever"})})})]},"graph-item-".concat(t))}))]})]})]})}var y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,161)).then((function(t){var a=t.getCLS,c=t.getFID,n=t.getFCP,r=t.getLCP,l=t.getTTFB;a(e),c(e),n(e),r(e),l(e)}))};l.a.render(Object(C.jsx)(n.a.StrictMode,{children:Object(C.jsx)(k,{})}),document.getElementById("root")),y()}},[[94,1,2]]]);
//# sourceMappingURL=main.f90ca1ac.chunk.js.map